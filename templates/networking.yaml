# =============================================================================
# Networking Template - VPC, 서브넷, NAT, Transit Gateway, VPN, VPC Peering
# =============================================================================

networking:

  vpc:
    enabled: true
    cidr: "10.0.0.0/16"                          # VPC CIDR 블록
    enable_dns_hostnames: true
    enable_dns_support: true

    availability_zones:                            # 사용할 가용영역
      - "ap-northeast-2a"
      - "ap-northeast-2c"

    subnets:
      public:
        enabled: true
        cidrs:                                     # 퍼블릭 서브넷 CIDR
          - "10.0.1.0/24"
          - "10.0.2.0/24"
        map_public_ip: true

      private:
        enabled: true
        cidrs:                                     # 프라이빗 서브넷 CIDR (앱 워크로드)
          - "10.0.10.0/24"
          - "10.0.11.0/24"

      database:
        enabled: false
        cidrs: []                                  # DB 전용 서브넷 CIDR
        # cidrs:
        #   - "10.0.20.0/24"
        #   - "10.0.21.0/24"

    internet_gateway:
      enabled: true                                # 퍼블릭 서브넷 사용 시 필수

    nat_gateway:
      enabled: true
      single_az: true                              # true: 비용 절감, false: 고가용성 (AZ당 1개)

    flow_logs:
      enabled: true
      retention_days: 30                           # CloudWatch 로그 보관 기간
      traffic_type: "ALL"                          # ALL | ACCEPT | REJECT

  transit_gateway:
    enabled: false
    # amazon_side_asn: 64512
    # auto_accept_shared_attachments: true
    # vpn_ecmp_support: true
    # shared_accounts: []                          # TGW를 공유할 계정 ID 목록

  vpc_peering:
    enabled: false
    # peers: []                                    # 피어링 대상 VPC 목록
    #   - name: "shared-services"
    #     vpc_id: ""
    #     account_id: ""
    #     region: "ap-northeast-2"

  vpn:
    enabled: false
    # type: "site-to-site"                         # site-to-site | client
    # customer_gateway_ip: ""
    # bgp_asn: 65000
    # static_routes: []

  route53:
    enabled: false
    # hosted_zones: []
    #   - domain_name: "example.com"
    #     private: false                           # true: VPC 내부 전용, false: 퍼블릭
    #     vpc_association: false                    # private zone일 때 연결할 VPC
    #     records: []
    #       - name: "api"
    #         type: "A"                            # A | AAAA | CNAME | ALIAS
    #         alias:
    #           target: "alb"                      # alb | nlb | cloudfront | s3
    #         # value: ""                          # CNAME, A 레코드 직접 값
    #         # ttl: 300
    #   - domain_name: "internal.example.com"
    #     private: true
    #     vpc_association: true
